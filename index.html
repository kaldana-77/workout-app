<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Daily Workout</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>
  <h1>My Daily Workout</h1>
  <p>Check off today’s lifts and track notes.</p>
  <div id="dateDisplay"></div>
  <div id="dayButtons"></div>

  <h2 id="dayTitle"></h2>
  <ul id="workoutList"></ul>

  <div>
    <button onclick="resetProgressForDay()">Reset this day's progress</button>
    <button onclick="markTodayComplete()">Mark Day Complete</button>
  </div>
  <p>Tip: Edit exercises by updating <code>workouts.js</code>.</p>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="workouts.js"></script>
  <script>
    const currentDate = new Date();
    let currentDay = currentDate.toLocaleDateString("en-US", { weekday: "long" });
    document.getElementById("dateDisplay").textContent = currentDate.toDateString();
    window.currentDay = currentDay;

    function renderDayButtons() {
      const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];
      const container = document.getElementById("dayButtons");
      container.innerHTML = "";
      days.forEach(day => {
        const btn = document.createElement("button");
        btn.textContent = day.slice(0, 3);
        btn.onclick = () => {
          currentDay = day;
          window.currentDay = day;
          renderWorkoutView();
        };
        container.appendChild(btn);
      });
    }

    function renderWorkoutView() {
      const list = document.getElementById("workoutList");
      const title = document.getElementById("dayTitle");
      const todayPlan = workoutPlan[currentDay] || [];

      const completedDays = getCompletedDays();
      const todayStr = new Date().toISOString().split("T")[0];
      const isDone = completedDays.includes(todayStr);
      title.textContent = `${currentDay} Workout ${isDone ? "Complete" : "Incomplete"}`;

      list.innerHTML = "";
      todayPlan.forEach(item => {
        const li = document.createElement("li");
        const exercise = document.createElement("span");
        exercise.className = "exercise-name";
        exercise.title = item.description || "";
        exercise.innerHTML = `<strong>${item.name}</strong><br>${item.sets} sets • ${item.reps}`;
        li.appendChild(exercise);
        list.appendChild(li);
      });
    }

    function markTodayComplete() {
      const dateStr = new Date().toISOString().split("T")[0];
      const completed = getCompletedDays();
      if (!completed.includes(dateStr)) {
        completed.push(dateStr);
        localStorage.setItem("completedDays", JSON.stringify(completed));
      }
      renderWorkoutView();
      showConfettiIfMonthComplete();
    }

    function resetProgressForDay() {
      const dateStr = new Date().toISOString().split("T")[0];
      const days = getCompletedDays().filter(d => d !== dateStr);
      localStorage.setItem("completedDays", JSON.stringify(days));
      renderWorkoutView();
    }

    function getCompletedDays() {
      return JSON.parse(localStorage.getItem("completedDays") || "[]");
    }

    function showConfettiIfMonthComplete() {
      const completed = getCompletedDays();
      const now = new Date();
      const currentMonth = now.getMonth();
      const daysInMonth = new Date(now.getFullYear(), currentMonth + 1, 0).getDate();
      let count = 0;

      for (let i = 1; i <= daysInMonth; i++) {
        const date = new Date(now.getFullYear(), currentMonth, i);
        const dateStr = date.toISOString().split("T")[0];
        if (completed.includes(dateStr)) count++;
      }

      if (count >= daysInMonth) {
        confetti({
          particleCount: 200,
          spread: 100,
          origin: { y: 0.6 }
        });
      }
    }

    renderDayButtons();
    renderWorkoutView();
  </script>
</body>
</html>









